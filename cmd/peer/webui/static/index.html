<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>P2P Chat Onboarding</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body class="login-body">
    <main class="onboarding">
      <!-- Auth Card -->
      <section class="login-box">
        <div class="brand">P2P Chat</div>
        <p class="subtitle">Step 1 · Authenticate</p>
        <!-- Warning stays inline so users can continue logging in even in stateless mode. -->
        <p id="warning-message" class="warning-message hidden">Auth server running, but database is disabled. Login data will not be persistent.</p>
        <input id="user" placeholder="Username" autocomplete="username" />
        <input id="pass" placeholder="Password" type="password" autocomplete="current-password" />
        <div class="login-actions">
          <button id="login-btn">Continue</button>
          <button id="register-btn" class="ghost">Register</button>
        </div>
        <p id="msg" class="status"></p>
      </section>

      <!-- Workspace Card -->
      <section class="login-box secondary">
        <p class="subtitle">Step 2 · Select workspace</p>
        <label for="workspace">Workspace</label>
        <select id="workspace">
          <option value="mesh">Mesh Home</option>
          <option value="lab">Lab Cluster</option>
        </select>
        <p class="text-muted">Workspaces simply change the default bootstrap/auth endpoints.</p>
      </section>

      <!-- Recovery Card appears only when the selected workspace cannot be reached quickly. -->
      <section id="recovery-panel" class="login-box recovery hidden">
        <p class="subtitle">Current workspace unavailable</p>
        <p class="text-muted">We could not reach the selected auth endpoint in time. You can retry or jump back to the last healthy workspace.</p>
        <button id="switch-endpoint" class="full">Switch to last known working endpoint</button>
        <a id="retry-workspace" href="#" class="retry-link">Retry this workspace</a>
      </section>
    </main>
    <script src="/static/login.js" type="module"></script>
  </body>
</html>
